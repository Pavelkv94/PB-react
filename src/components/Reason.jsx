import React, { useEffect, useState } from "react";
import styles from "../styles/Reason.module.scss";

const Reason = ({ isDarkTheme, title, text, screenSize }) => {
  const largeScreen = screenSize > 1560;

  const dynamicHeight = largeScreen ? "210px" : screenSize < 721 ? "130px" :  "162px";
  const initHeight = largeScreen ? "94px" : "75px";

  const [height, setHeight] = useState(initHeight);

  const handleClick = () => setHeight(height === dynamicHeight ? initHeight : dynamicHeight);

  const [arrowAnim, setArrowAnim] = useState(1);

  // useEffect(() => {
  //   let timeout = setInterval(() => {
  //     arrowAnim === 1 ? setArrowAnim(2) : arrowAnim === 2 ? setArrowAnim(3) : setArrowAnim(1);
  //   }, 200);

  //   return () => clearInterval(timeout);
  // }, [arrowAnim]);

  const handleSetArrow = () => {
    if (isDarkTheme) {
      return arrowAnim === 1 ? (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 20.5725C9.58606 21.0831 10.4139 21.0831 10.9245 20.5725L19.2455 12.2516C19.7561 11.7409 19.7561 10.9131 19.2455 10.4025C18.7349 9.89185 17.907 9.89185 17.3964 10.4025L10 17.7988L2.60363 10.4025C2.09302 9.89184 1.26515 9.89184 0.754539 10.4025C0.243927 10.9131 0.243926 11.7409 0.754538 12.2515L9.07545 20.5725ZM8.69249 18.3521L8.69249 19.6479L11.3075 19.6479L11.3075 18.3521L8.69249 18.3521Z"
            fill="#00EDFF"
          />
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539789 1.26515 0.539788 0.754539 1.0504C0.243927 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="#00EDFF"
          />
          <path
            d="M9.07545 29.9245C9.58606 30.4351 10.4139 30.4351 10.9245 29.9245L19.2455 21.6036C19.7561 21.093 19.7561 20.2651 19.2455 19.7545C18.7349 19.2439 17.907 19.2439 17.3964 19.7545L10 27.1509L2.60363 19.7545C2.09302 19.2439 1.26515 19.2439 0.754539 19.7545C0.243927 20.2651 0.243926 21.093 0.754538 21.6036L9.07545 29.9245ZM8.69249 27.7041L8.69249 29L11.3075 29L11.3075 27.7041L8.69249 27.7041Z"
            fill="#00EDFF"
          />
        </svg>
      ) : arrowAnim === 2 ? (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 20.5725C9.58606 21.0831 10.4139 21.0831 10.9245 20.5725L19.2455 12.2516C19.7561 11.7409 19.7561 10.9131 19.2455 10.4025C18.7349 9.89185 17.907 9.89185 17.3964 10.4025L10 17.7988L2.60363 10.4025C2.09302 9.89184 1.26515 9.89184 0.754539 10.4025C0.243927 10.9131 0.243926 11.7409 0.754538 12.2515L9.07545 20.5725ZM8.69249 18.3521L8.69249 19.6479L11.3075 19.6479L11.3075 18.3521L8.69249 18.3521Z"
            fill="url(#paint0_linear_61_89)"
          />
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539789 1.26515 0.539788 0.754539 1.0504C0.243927 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="url(#paint1_linear_61_89)"
          />
          <path
            d="M9.07545 29.9245C9.58606 30.4351 10.4139 30.4351 10.9245 29.9245L19.2455 21.6036C19.7561 21.093 19.7561 20.2651 19.2455 19.7545C18.7349 19.2439 17.907 19.2439 17.3964 19.7545L10 27.1509L2.60363 19.7545C2.09302 19.2439 1.26515 19.2439 0.754539 19.7545C0.243927 20.2651 0.243926 21.093 0.754538 21.6036L9.07545 29.9245ZM8.69249 27.7041L8.69249 29L11.3075 29L11.3075 27.7041L8.69249 27.7041Z"
            fill="url(#paint2_linear_61_89)"
          />
          <defs>
            <linearGradient id="paint0_linear_61_89" x1="-4" y1="7.35205" x2="22.5" y2="22.8521" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="1" stop-color="#0075FF" />
            </linearGradient>
            <linearGradient id="paint1_linear_61_89" x1="-4" y1="-2" x2="22.5" y2="13.5" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="1" stop-color="#00C2FF" />
            </linearGradient>
            <linearGradient id="paint2_linear_61_89" x1="-4" y1="16.7041" x2="22.5" y2="32.2041" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="1" stop-color="#0029FF" />
            </linearGradient>
          </defs>
        </svg>
      ) : (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 20.5725C9.58606 21.0831 10.4139 21.0831 10.9245 20.5725L19.2455 12.2516C19.7561 11.7409 19.7561 10.9131 19.2455 10.4025C18.7349 9.89185 17.907 9.89185 17.3964 10.4025L10 17.7988L2.60363 10.4025C2.09302 9.89184 1.26515 9.89184 0.75454 10.4025C0.243926 10.9131 0.243926 11.7409 0.754539 12.2515L9.07545 20.5725ZM8.69249 18.3521L8.69249 19.6479L11.3075 19.6479L11.3075 18.3521L8.69249 18.3521Z"
            fill="url(#paint0_linear_60_3)"
          />
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539788 1.26515 0.539788 0.75454 1.0504C0.243926 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="url(#paint1_linear_60_3)"
          />
          <path
            d="M9.07545 29.9245C9.58606 30.4351 10.4139 30.4351 10.9245 29.9245L19.2455 21.6036C19.7561 21.093 19.7561 20.2651 19.2455 19.7545C18.7349 19.2439 17.907 19.2439 17.3964 19.7545L10 27.1509L2.60363 19.7545C2.09302 19.2439 1.26515 19.2439 0.75454 19.7545C0.243926 20.2651 0.243926 21.093 0.754539 21.6036L9.07545 29.9245ZM8.69249 27.7041L8.69249 29L11.3075 29L11.3075 27.7041L8.69249 27.7041Z"
            fill="url(#paint2_linear_60_3)"
          />
          <defs>
            <linearGradient id="paint0_linear_60_3" x1="-4" y1="7.35205" x2="22.5" y2="22.8521" gradientUnits="userSpaceOnUse">
              <stop stop-color="#0075FF" />
              <stop offset="1" stop-color="#0075FF" />
            </linearGradient>
            <linearGradient id="paint1_linear_60_3" x1="-4" y1="-2" x2="22.5" y2="13.5" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="1" stop-color="#00C2FF" />
            </linearGradient>
            <linearGradient id="paint2_linear_60_3" x1="-4" y1="16.7041" x2="13" y2="32.5" gradientUnits="userSpaceOnUse">
              <stop offset="1" stop-color="#0029FF" />
            </linearGradient>
          </defs>
        </svg>
      );
    } else {
      return arrowAnim === 1 ? (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539789 1.26515 0.539788 0.754539 1.0504C0.243927 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="#353535"
          />
          <path
            d="M9.07545 20.5163C9.58606 21.0269 10.4139 21.0269 10.9245 20.5163L19.2455 12.1954C19.7561 11.6848 19.7561 10.8569 19.2455 10.3463C18.7349 9.8357 17.907 9.8357 17.3964 10.3463L10 17.7427L2.60363 10.3463C2.09302 9.83569 1.26515 9.83569 0.754539 10.3463C0.243927 10.8569 0.243926 11.6848 0.754538 12.1954L9.07545 20.5163ZM8.69249 18.2959L8.69249 19.5918L11.3075 19.5918L11.3075 18.2959L8.69249 18.2959Z"
            fill="#353535"
          />
          <path
            d="M9.07545 29.8122C9.58606 30.3228 10.4139 30.3228 10.9245 29.8122L19.2455 21.4912C19.7561 20.9806 19.7561 20.1528 19.2455 19.6421C18.7349 19.1315 17.907 19.1315 17.3964 19.6421L10 27.0385L2.60363 19.6421C2.09302 19.1315 1.26515 19.1315 0.754539 19.6421C0.243927 20.1527 0.243926 20.9806 0.754538 21.4912L9.07545 29.8122ZM8.69249 27.5917L8.69249 28.8876L11.3075 28.8876L11.3075 27.5917L8.69249 27.5917Z"
            fill="#353535"
          />
        </svg>
      ) : arrowAnim === 2 ? (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539789 1.26515 0.539788 0.754539 1.0504C0.243927 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="url(#paint0_linear_61_77)"
          />
          <path
            d="M9.07545 20.5163C9.58606 21.0269 10.4139 21.0269 10.9245 20.5163L19.2455 12.1954C19.7561 11.6848 19.7561 10.8569 19.2455 10.3463C18.7349 9.8357 17.907 9.8357 17.3964 10.3463L10 17.7427L2.60363 10.3463C2.09302 9.83569 1.26515 9.83569 0.754539 10.3463C0.243927 10.8569 0.243926 11.6848 0.754538 12.1954L9.07545 20.5163ZM8.69249 18.2959L8.69249 19.5918L11.3075 19.5918L11.3075 18.2959L8.69249 18.2959Z"
            fill="#353535"
          />
          <path
            d="M9.07545 20.5163C9.58606 21.0269 10.4139 21.0269 10.9245 20.5163L19.2455 12.1954C19.7561 11.6848 19.7561 10.8569 19.2455 10.3463C18.7349 9.8357 17.907 9.8357 17.3964 10.3463L10 17.7427L2.60363 10.3463C2.09302 9.83569 1.26515 9.83569 0.754539 10.3463C0.243927 10.8569 0.243926 11.6848 0.754538 12.1954L9.07545 20.5163ZM8.69249 18.2959L8.69249 19.5918L11.3075 19.5918L11.3075 18.2959L8.69249 18.2959Z"
            fill="url(#paint1_linear_61_77)"
          />
          <path
            d="M9.07545 29.8122C9.58606 30.3228 10.4139 30.3228 10.9245 29.8122L19.2455 21.4912C19.7561 20.9806 19.7561 20.1528 19.2455 19.6421C18.7349 19.1315 17.907 19.1315 17.3964 19.6421L10 27.0385L2.60363 19.6421C2.09302 19.1315 1.26515 19.1315 0.754539 19.6421C0.243927 20.1527 0.243926 20.9806 0.754538 21.4912L9.07545 29.8122ZM8.69249 27.5917L8.69249 28.8876L11.3075 28.8876L11.3075 27.5917L8.69249 27.5917Z"
            fill="#353535"
          />
          <path
            d="M9.07545 29.8122C9.58606 30.3228 10.4139 30.3228 10.9245 29.8122L19.2455 21.4912C19.7561 20.9806 19.7561 20.1528 19.2455 19.6421C18.7349 19.1315 17.907 19.1315 17.3964 19.6421L10 27.0385L2.60363 19.6421C2.09302 19.1315 1.26515 19.1315 0.754539 19.6421C0.243927 20.1527 0.243926 20.9806 0.754538 21.4912L9.07545 29.8122ZM8.69249 27.5917L8.69249 28.8876L11.3075 28.8876L11.3075 27.5917L8.69249 27.5917Z"
            fill="url(#paint2_linear_61_77)"
          />
          <defs>
            <linearGradient id="paint0_linear_61_77" x1="-1.5" y1="-5" x2="16" y2="10" gradientUnits="userSpaceOnUse">
              <stop stop-color="#A0F8FF" />
              <stop offset="1" stop-color="#95BFFA" />
            </linearGradient>
            <linearGradient id="paint1_linear_61_77" x1="-1.5" y1="4.2959" x2="20" y2="20" gradientUnits="userSpaceOnUse">
              <stop stop-color="#7FF6FF" />
              <stop offset="0.76875" stop-color="#75AAF4" />
            </linearGradient>
            <linearGradient id="paint2_linear_61_77" x1="-1.5" y1="13.5917" x2="16" y2="28.5917" gradientUnits="userSpaceOnUse">
              <stop stop-color="#AAF9FF" />
              <stop offset="0.633333" stop-color="#4891F8" />
              <stop offset="0.633333" stop-color="#4891F8" />
            </linearGradient>
          </defs>
        </svg>
      ) : (
        <svg width="20" height="31" viewBox="0 0 20 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.07545 11.2204C9.58606 11.731 10.4139 11.731 10.9245 11.2204L19.2455 2.8995C19.7561 2.38889 19.7561 1.56102 19.2455 1.05041C18.7349 0.539798 17.907 0.539797 17.3964 1.05041L10 8.44678L2.60363 1.0504C2.09302 0.539789 1.26515 0.539788 0.754539 1.0504C0.243927 1.56101 0.243926 2.38888 0.754538 2.89949L9.07545 11.2204ZM8.69249 9L8.69249 10.2959L11.3075 10.2959L11.3075 9L8.69249 9Z"
            fill="url(#paint0_linear_61_81)"
          />
          <path
            d="M9.07545 20.5163C9.58606 21.0269 10.4139 21.0269 10.9245 20.5163L19.2455 12.1954C19.7561 11.6848 19.7561 10.8569 19.2455 10.3463C18.7349 9.8357 17.907 9.8357 17.3964 10.3463L10 17.7427L2.60363 10.3463C2.09302 9.83569 1.26515 9.83569 0.754539 10.3463C0.243927 10.8569 0.243926 11.6848 0.754538 12.1954L9.07545 20.5163ZM8.69249 18.2959L8.69249 19.5918L11.3075 19.5918L11.3075 18.2959L8.69249 18.2959Z"
            fill="#353535"
          />
          <path
            d="M9.07545 20.5163C9.58606 21.0269 10.4139 21.0269 10.9245 20.5163L19.2455 12.1954C19.7561 11.6848 19.7561 10.8569 19.2455 10.3463C18.7349 9.8357 17.907 9.8357 17.3964 10.3463L10 17.7427L2.60363 10.3463C2.09302 9.83569 1.26515 9.83569 0.754539 10.3463C0.243927 10.8569 0.243926 11.6848 0.754538 12.1954L9.07545 20.5163ZM8.69249 18.2959L8.69249 19.5918L11.3075 19.5918L11.3075 18.2959L8.69249 18.2959Z"
            fill="url(#paint1_linear_61_81)"
          />
          <path
            d="M9.07545 29.8122C9.58606 30.3228 10.4139 30.3228 10.9245 29.8122L19.2455 21.4912C19.7561 20.9806 19.7561 20.1528 19.2455 19.6421C18.7349 19.1315 17.907 19.1315 17.3964 19.6421L10 27.0385L2.60363 19.6421C2.09302 19.1315 1.26515 19.1315 0.754539 19.6421C0.243927 20.1527 0.243926 20.9806 0.754538 21.4912L9.07545 29.8122ZM8.69249 27.5917L8.69249 28.8876L11.3075 28.8876L11.3075 27.5917L8.69249 27.5917Z"
            fill="#353535"
          />
          <path
            d="M9.07545 29.8122C9.58606 30.3228 10.4139 30.3228 10.9245 29.8122L19.2455 21.4912C19.7561 20.9806 19.7561 20.1528 19.2455 19.6421C18.7349 19.1315 17.907 19.1315 17.3964 19.6421L10 27.0385L2.60363 19.6421C2.09302 19.1315 1.26515 19.1315 0.754539 19.6421C0.243927 20.1527 0.243926 20.9806 0.754538 21.4912L9.07545 29.8122ZM8.69249 27.5917L8.69249 28.8876L11.3075 28.8876L11.3075 27.5917L8.69249 27.5917Z"
            fill="url(#paint2_linear_61_81)"
          />
          <defs>
            <linearGradient id="paint0_linear_61_81" x1="-1.5" y1="-5" x2="16" y2="10" gradientUnits="userSpaceOnUse">
              <stop stop-color="#4BF2FF" />
              <stop offset="1" stop-color="#2C84FF" />
            </linearGradient>
            <linearGradient id="paint1_linear_61_81" x1="-1.5" y1="4.2959" x2="20" y2="20" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="0.76875" stop-color="#2577EB" />
            </linearGradient>
            <linearGradient id="paint2_linear_61_81" x1="-1.5" y1="13.5917" x2="16" y2="28.5917" gradientUnits="userSpaceOnUse">
              <stop stop-color="#00EDFF" />
              <stop offset="0.55" stop-color="#006AFF" />
            </linearGradient>
          </defs>
        </svg>
      );
    }
  };

  return (
    <section className={`${styles.reason} ${isDarkTheme ? styles.dark : styles.light}`} style={{ height: height }}>
      <h4>{title}</h4>
      <div className={styles.arrows} onClick={handleClick}>
        {handleSetArrow()}
      </div>
      <p style={{ opacity: height === dynamicHeight ? 1 : 0 }} className={styles[height === dynamicHeight ? "full" : "notFull"]}>
        {text}
      </p>
    </section>
  );
};

export default Reason;
